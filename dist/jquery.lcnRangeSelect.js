!function(e,a){var t=e.jQuery;if("function"==typeof define&&define.amd)t?define([],a.bind(null,t)):define(["jquery"],a);else if("object"==typeof exports)module.exports=a(t?t:require("jquery"));else{if(!t)throw"Missing required jQuery dependency";a(t)}}(this,function(e){function a(a){var n=t(a),l=a.find(".handle"),i=a.find(".handle1"),r=a.find(".handle2"),u=a.find(".selected-range"),d=a.innerWidth(),s=d/n.stepsCount;value1=i.attr("data-value"),value2=r.attr("data-value"),l.each(function(t,l){var i=e(l),r=i.attr("data-value"),u=(r-n.minValue)*s/n.step;i.css({left:u}),a.find(i.attr("data-value-target")).html(i.attr("data-value")+n.unit)});var o=i.position().left,f=r.position().left-o;u.css({left:o,width:f}),a.find("input").val(value1+";"+value2).trigger("change")}function t(e){var a=e.find("input"),t={minValue:defaultMinValue,maxValue:defaultMaxValue,unit:defaultUnit,step:defaultStep};return void 0!==a.attr("data-min")&&(t.minValue=parseInt(a.attr("data-min"),10)),void 0!==a.attr("data-max")&&(t.maxValue=parseInt(a.attr("data-max"),10)),void 0!==a.attr("data-unit")&&(t.unit=a.attr("data-unit")),void 0!==a.attr("data-step")&&(t.step=parseFloat(a.attr("data-step"))),t.stepsCount=(t.maxValue-t.minValue)/t.step,t}function n(n){$container=e('<div class="range-select-wrapper"></div>'),n.wrap($container),$container=n.parent();var i=t($container),r=i.minValue,u=i.maxValue;if(n.val()){var d=n.val().split(";");r=parseFloat(d[0]),u=parseFloat(d[1])}$container.append('<div class="handle handle1" data-value="'+r+'" data-value-target=".value1"></div>'),$container.append('<div class="handle handle2" data-value="'+u+'" data-value-target=".value2"></div>'),$container.append('<div class="values"><span class="value1"></span> - <span class="value2"></span></div>'),$container.append('<div class="selected-range"></div>'),a($container),$container.on("mousedown touchstart",".handle",function(a){l||(l=!0,a.preventDefault(),$currentHandle=e(a.target),e(document).one("mouseup touchend",function(){l=!1,$currentHandle=null}))}),e(window).on("resize",a.bind(null,$container))}var l=!1;return $currentHandle=null,defaultMinValue=0,defaultMaxValue=100,defaultUnit="%",defaultStep=1,e(document).on("mousemove touchmove",function(n){if(l){var i=$currentHandle.closest(".range-select-wrapper"),r=t(i),u=i.innerWidth();if(!n.offsetX&&n.originalEvent.touches){var d=e(n.target).offset();n.offsetX=n.originalEvent.touches[0].pageX-d.left}else if("undefined"==typeof n.offsetX||"undefined"==typeof n.offsetY){var d=e(n.target).offset();n.offsetX=n.pageX-d.left}var s=n.target.offsetLeft+n.offsetX,o=u/r.stepsCount,f=r.minValue+Math.round(s/o)*r.step;f=Math.max(r.minValue,f),f=Math.min(r.maxValue,f);{i.find(".handle").not($currentHandle[0])}f=$currentHandle.hasClass("handle1")?Math.min(parseInt(i.find(".handle2").attr("data-value"),10)-1,f):Math.max(parseInt(i.find(".handle1").attr("data-value"),10)+1,f),$currentHandle.attr("data-value",f),a(i)}}),e.fn.lcnRangeSelect=function(){return this.each(function(){n(e(this))})},e.fn.lcnRangeSelect});