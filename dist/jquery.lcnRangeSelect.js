!function(a){function t(t){var n=e(t),l=t.find(".handle"),u=t.find(".handle1"),i=t.find(".handle2"),d=t.find(".selected-range"),r=t.width(),o=l.width(),s=r/n.stepsCount;value1=u.attr("data-value"),value2=i.attr("data-value"),l.each(function(e,l){var u=a(l),i=u.attr("data-value"),d=i*s;u.css({left:d-o/2}),t.find(u.attr("data-value-target")).html(u.attr("data-value")+n.unit)});var f=u.position().left+o/2,c=i.position().left+o/2-f;d.css({left:f,width:c}),t.find("input").val(value1+";"+value2).trigger("change")}function e(a){var t=a.find("input"),e={minValue:defaultMinValue,maxValue:defaultMaxValue,unit:defaultUnit};return void 0!==t.attr("data-min")&&(e.minValue=parseInt(t.attr("data-min"),10)),void 0!==t.attr("data-max")&&(e.maxValue=parseInt(t.attr("data-max"),10)),void 0!==t.attr("data-unit")&&(e.unit=t.attr("data-unit")),e.stepsCount=Math.round(e.maxValue-e.minValue),e}function n(n){$container=a('<div class="range-select-wrapper"></div>'),n.wrap($container),$container=n.parent();var u=e($container),i=u.minValue,d=u.maxValue;if(n.val()){var r=n.val().split(";");i=parseInt(r[0],10),d=parseInt(r[1],10)}$container.append('<div class="handle handle1" data-value="'+i+'" data-value-target=".value1"></div>'),$container.append('<div class="handle handle2" data-value="'+d+'" data-value-target=".value2"></div>'),$container.append('<div class="values"><span class="value1"></span> - <span class="value2"></span></div>'),$container.append('<div class="selected-range"></div>'),t($container),$container.on("mousedown touchstart",".handle",function(t){l||(l=!0,t.preventDefault(),$currentHandle=a(t.target),a(document).one("mouseup touchend",function(){l=!1,$currentHandle=null}))}),a(window).on("resize",t.bind(null,$container))}var l=!1;$currentHandle=null,defaultMinValue=0,defaultMaxValue=100,defaultUnit="%",a(document).on("mousemove touchmove",function(n){if(l){var u=$currentHandle.closest(".range-select-wrapper"),i=e(u),d=u.width();if(!n.offsetX&&n.originalEvent.touches){var r=a(n.target).offset();n.offsetX=n.originalEvent.touches[0].pageX-r.left}else if("undefined"==typeof n.offsetX||"undefined"==typeof n.offsetY){var r=a(n.target).offset();n.offsetX=n.pageX-r.left}var o=n.target.offsetLeft+n.offsetX,s=d/i.stepsCount,f=Math.round(o/s);f=Math.max(i.minValue,f),f=Math.min(i.maxValue,f);{u.find(".handle").not($currentHandle[0])}f=$currentHandle.hasClass("handle1")?Math.min(parseInt(u.find(".handle2").attr("data-value"),10)-1,f):Math.max(parseInt(u.find(".handle1").attr("data-value"),10)+1,f),$currentHandle.attr("data-value",f),t(u)}}),a.fn.lcnRangeSelect=function(){return this.each(function(){n(a(this))})}}(jQuery);