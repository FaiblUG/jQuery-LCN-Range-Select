!function(a,e){var t=a.jQuery;if("function"==typeof define&&define.amd)t?define([],e.bind(null,t)):define(["jquery"],e);else if("object"==typeof exports)module.exports=e(t?t:require("jquery"));else{if(!t)throw"Missing required jQuery dependency";e(t)}}(this,function(a){function e(e){var n=t(e),l=e.find(".handle"),i=e.find(".handle1"),r=e.find(".selected-range"),d=e.innerWidth(),u=d/n.stepsCount;if(value1=i.attr("data-value"),!n.isSingleValue){var s=e.find(".handle2");value2=s.attr("data-value")}l.each(function(t,l){var i=a(l),r=i.attr("data-value"),d=(r-n.minValue)*u/n.step;i.css({left:d}),e.find(i.attr("data-value-target")).html(i.attr("data-value")+n.unit)});var o=i.position().left;if(n.isSingleValue)e.find("input").val(value1).trigger("change");else{var f=s.position().left-o;r.css({left:o,width:f}),e.find("input").val(value1+";"+value2).trigger("change")}}function t(a){var e=a.find("input"),t={minValue:defaultMinValue,maxValue:defaultMaxValue,unit:defaultUnit,step:defaultStep,isSingleValue:l(e)};return void 0!==e.attr("data-min")&&(t.minValue=parseFloat(e.attr("data-min"))),void 0!==e.attr("data-max")&&(t.maxValue=parseFloat(e.attr("data-max"))),void 0!==e.attr("data-unit")&&(t.unit=e.attr("data-unit")),void 0!==e.attr("data-step")&&(t.step=parseFloat(e.attr("data-step"))),t.stepsCount=(t.maxValue-t.minValue)/t.step,t}function n(n){$container=a('<div class="range-select-wrapper"></div>'),n.wrap($container),$container=n.parent();var l=t($container),r=l.minValue;if(!l.isSingleValue)var d=l.maxValue;if(n.val())if(l.isSingleValue)r=parseFloat(n.val());else{var u=n.val().split(";");r=parseFloat(u[0]),d=parseFloat(u[1])}$container.append('<div class="handle handle1" data-value="'+r+'" data-value-target=".value1"></div>'),l.isSingleValue?$container.append('<div class="values"><span class="value1"></span></div>'):($container.append('<div class="handle handle2" data-value="'+d+'" data-value-target=".value2"></div>'),$container.append('<div class="values"><span class="value1"></span> - <span class="value2"></span></div>')),$container.append('<div class="selected-range"></div>'),e($container),$container.on("mousedown touchstart",".handle",function(e){i||(i=!0,e.preventDefault(),$currentHandle=a(e.target),a(document).one("mouseup touchend",function(){i=!1,$currentHandle=null}))}),a(window).on("resize",e.bind(null,$container))}function l(a){return void 0!==a.attr("data-single-value")&&"false"!==a.attr("data-single-value")}var i=!1;return $currentHandle=null,defaultMinValue=0,defaultMaxValue=100,defaultUnit="%",defaultStep=1,a(document).on("mousemove touchmove",function(n){if(i){var l=a(n.target);if($draggingWrapper=l.closest(".range-select-wrapper"),0===$draggingWrapper.length)return;if($currentHandle.hasClass("handle1")?$draggingHandle=$draggingWrapper.find(".handle1"):$currentHandle.hasClass("handle2")&&($draggingHandle=$draggingWrapper.find(".handle2")),$draggingHandle[0]!==$currentHandle[0])return;var r=$currentHandle.closest(".range-select-wrapper"),d=t(r),u=r.innerWidth();if(!n.offsetX&&n.originalEvent.touches){var s=l.offset();n.offsetX=n.originalEvent.touches[0].pageX-s.left}else if("undefined"==typeof n.offsetX||"undefined"==typeof n.offsetY){var s=l.offset();n.offsetX=n.pageX-s.left}var o=n.offsetX;l.hasClass("handle")&&(o+=n.target.offsetLeft);var f=u/d.stepsCount,c=d.minValue+Math.round(o/f)*d.step;if(c=Math.max(d.minValue,c),c=Math.min(d.maxValue,c),!d.isSingleValue){{r.find(".handle").not($currentHandle[0])}c=$currentHandle.hasClass("handle1")?Math.min(parseFloat(r.find(".handle2").attr("data-value"))-d.step,c):Math.max(parseFloat(r.find(".handle1").attr("data-value"))+d.step,c)}d.step<.1?c=Math.round(100*c)/100:d.step<1&&(c=Math.round(10*c)/10),$currentHandle.attr("data-value",c),e(r)}}),a.fn.lcnRangeSelect=function(){return this.each(function(){n(a(this))})},a(function(){a("input.range-select[data-auto-init]").lcnRangeSelect()}),a.fn.lcnRangeSelect});