!function(e,a){var t=e.jQuery;if("function"==typeof define&&define.amd)t?define([],a.bind(null,t)):define(["jquery"],a);else if("object"==typeof exports)module.exports=a(t?t:require("jquery"));else{if(!t)throw"Missing required jQuery dependency";a(t)}}(this,function(e){function a(a){var n,i=t(a),r=a.find(".handle"),l=a.find(".handle1"),d=a.find(".selected-range");"ltr"===i.direction?n=a.innerWidth():"btt"===i.direction&&(n=a.innerHeight());var u=n/i.stepsCount;if(value1=l.attr("data-value"),!i.isSingleValue){var s=a.find(".handle2");value2=s.attr("data-value")}if(r.each(function(t,n){var r=e(n),l=r.attr("data-value"),d=(l-i.minValue)*u/i.step;"ltr"===i.direction?r.css({left:d}):"btt"===i.direction&&r.css({bottom:d}),a.find(r.attr("data-value-target")).html(r.attr("data-value")+i.unit)}),i.isSingleValue)a.find("input").val(value1).trigger("change");else{if("ltr"===i.direction){var o=l.position().left,p=s.position().left-o;d.css({left:o,width:p})}else if("btt"===i.direction){var c=s.position().top+s.width()/2,f=l.position().top+s.width()/2-c;d.css({top:c,height:f})}a.find("input").val(value1+";"+value2).trigger("change")}}function t(e){$input="INPUT"===e[0].nodeName?e:e.find("input");var a={minValue:defaultMinValue,maxValue:defaultMaxValue,unit:defaultUnit,step:defaultStep,direction:defaultDirection,isSingleValue:i($input)};if(void 0!==$input.attr("data-min")&&(a.minValue=parseFloat($input.attr("data-min"))),void 0!==$input.attr("data-max")&&(a.maxValue=parseFloat($input.attr("data-max"))),void 0!==$input.attr("data-unit")&&(a.unit=$input.attr("data-unit")),void 0!==$input.attr("data-step")&&(a.step=parseFloat($input.attr("data-step"))),void 0!==$input.attr("data-direction")){if(-1===supportedDirections.indexOf($input.attr("data-direction")))throw new Error("Unsupported direction: "+$input.attr("data-direction"));a.direction=$input.attr("data-direction")}return a.stepsCount=(a.maxValue-a.minValue)/a.step,a}function n(n){var i=t(n);$container=e("<div>"),$container.addClass("range-select-wrapper"),$container.addClass("direction-"+i.direction),n.wrap($container),$container=n.parent();var l=i.minValue;if(!i.isSingleValue)var d=i.maxValue;if(n.val())if(i.isSingleValue)l=parseFloat(n.val());else{var u=n.val().split(";");l=parseFloat(u[0]),d=parseFloat(u[1])}$container.append('<div class="handle handle1" data-value="'+l+'" data-value-target=".value1"></div>'),i.isSingleValue?$container.append('<div class="values"><span class="value1"></span></div>'):($container.append('<div class="handle handle2" data-value="'+d+'" data-value-target=".value2"></div>'),"ltr"===i.direction?$container.append('<div class="values"><span class="value1"></span> - <span class="value2"></span></div>'):"btt"===i.direction&&$container.append('<div class="values"><span class="value2"></span> - <span class="value1"></span></div>')),$container.append('<div class="selected-range"></div>'),a($container),$container.on("mousedown touchstart",".handle",function(a){r||(r=!0,a.preventDefault(),$currentHandle=e(a.target),e(document).one("mouseup touchend",function(){r=!1,$currentHandle=null}))}),e(window).on("resize",a.bind(null,$container))}function i(e){return void 0!==e.attr("data-single-value")&&"false"!==e.attr("data-single-value")}var r=!1;return $currentHandle=null,defaultMinValue=0,defaultMaxValue=100,defaultUnit="%",defaultStep=1,defaultDirection="ltr",supportedDirections=["ltr","btt"],e(document).on("mousemove touchmove",function(n){if(r){var i=e(n.target);if($draggingWrapper=i.closest(".range-select-wrapper"),0===$draggingWrapper.length)return;if($currentHandle.hasClass("handle1")?$draggingHandle=$draggingWrapper.find(".handle1"):$currentHandle.hasClass("handle2")&&($draggingHandle=$draggingWrapper.find(".handle2")),$draggingHandle[0]!==$currentHandle[0])return;var l=$currentHandle.closest(".range-select-wrapper"),d=t(l);if(!n.offsetX&&n.originalEvent.touches){var u=i.offset();n.offsetX=n.originalEvent.touches[0].pageX-u.left,n.offsetY=n.originalEvent.touches[0].pageY-u.top}else if("undefined"==typeof n.offsetX||"undefined"==typeof n.offsetY){var u=i.offset();n.offsetX=n.pageX-u.left,n.offsetY=n.pageY-u.top}var s=n.offsetX,o=n.offsetY;i.hasClass("handle")&&(s+=n.target.offsetLeft,o+=n.target.offsetTop);var p,c;"ltr"===d.direction?(p=l.innerWidth(),c=s):"btt"===d.direction&&(p=l.innerHeight(),c=p-o);var f=p/d.stepsCount,v=d.minValue+Math.round(c/f)*d.step;if(v=Math.max(d.minValue,v),v=Math.min(d.maxValue,v),!d.isSingleValue){{l.find(".handle").not($currentHandle[0])}v=$currentHandle.hasClass("handle1")?Math.min(parseFloat(l.find(".handle2").attr("data-value"))-d.step,v):Math.max(parseFloat(l.find(".handle1").attr("data-value"))+d.step,v)}d.step<.1?v=Math.round(100*v)/100:d.step<1&&(v=Math.round(10*v)/10),$currentHandle.attr("data-value",v),a(l)}}),e.fn.lcnRangeSelect=function(){return this.each(function(){n(e(this))})},e(function(){e("input.range-select[data-auto-init]").lcnRangeSelect()}),e.fn.lcnRangeSelect});